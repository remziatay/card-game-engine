(this["webpackJsonpcard-game-engine"]=this["webpackJsonpcard-game-engine"]||[]).push([[0],[,,,,,,,function(e,t,n){e.exports={Container:"Card_Container__2W8YJ",Card:"Card_Card__1a3PF",Backface:"Card_Backface__34aEB",Empty:"Card_Empty__2juuo",Egg:"Card_Egg__2rYth",Text:"Card_Text__2SDrG",Float:"Card_Float__2KMnF",Attack:"Card_Attack__7Lv0U",Health:"Card_Health__3Tn_R",Mana:"Card_Mana__zwGNW"}},,,function(e,t,n){e.exports={Egg:"Pawn_Egg__2gtQs",Float:"Pawn_Float__1nyn7",Attack:"Pawn_Attack__ryZ0e",Health:"Pawn_Health__Q6FiS"}},function(e,t,n){e.exports={BottomPane:"BottomPane_BottomPane__3wBf5",Container:"BottomPane_Container__29iZx"}},,function(e,t,n){e.exports={Board:"Board_Board__tkmV4",Line:"Board_Line__3obCo"}},,,,,function(e,t,n){e.exports={Scene:"Scene_Scene__MfpmQ"}},,function(e,t,n){e.exports=n.p+"static/media/skull.44d42c36.svg"},function(e,t,n){e.exports=n.p+"static/media/card-texture.15ee4520.jpg"},function(e,t,n){e.exports={Hand:"Hand_Hand__2DWBX"}},function(e,t,n){e.exports=n.p+"static/media/test.24636254.svg"},,function(e,t,n){e.exports=n(38)},,,,,function(e,t,n){},function(e,t,n){},,,,,,,function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"endTurn",(function(){return K})),n.d(a,"drawCard",(function(){return U})),n.d(a,"focusCard",(function(){return H})),n.d(a,"pickCard",(function(){return L})),n.d(a,"unpickCard",(function(){return Y})),n.d(a,"moveCard",(function(){return X})),n.d(a,"resetRotation",(function(){return G})),n.d(a,"moveFakeCard",(function(){return V})),n.d(a,"putCard",(function(){return Z})),n.d(a,"setDeckPosition",(function(){return J})),n.d(a,"pickPawn",(function(){return Q})),n.d(a,"focusPawn",(function(){return q})),n.d(a,"removePawn",(function(){return $})),n.d(a,"attack",(function(){return ee})),n.d(a,"resizeWindow",(function(){return te}));var r=n(0),o=n.n(r),i=n(12),c=n.n(i),d=(n(30),n(2)),s=n(3),u=n(5),p=n(4),l=(n(31),n(18)),f=n.n(l),h=n(1),k=n(9),m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,n=arguments.length>2?arguments[2]:void 0;return function(){for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];clearTimeout(n),n=setTimeout((function(){n=null,e.apply(void 0,r)}),t)}},C=function(e,t,n){return e>n?n:e<t?t:e};function v(e,t){return Object(h.a)(Object(h.a)({},e),t)}var y=Array(30).fill().map((function(e,t){return{key:"p".concat(t),title:"".concat(t,". card"),background:"rgb(".concat([0,0,0].map((function(e){return 256*Math.random()|0})),")"),mana:Math.floor(1+8*Math.random()),attack:Math.floor(1+7*Math.random()),health:Math.floor(1+8*Math.random())}})),g=Array(9).fill().map((function(e,t){return{key:"op".concat(t),background:"rgb(".concat([0,0,0].map((function(e){return 256*Math.random()|0})),")"),attack:Math.floor(1+7*Math.random()),health:Math.floor(1+8*Math.random())}})).map((function(e){return Object(h.a)(Object(h.a)({},e),{},{realHealth:e.health})})),w={x:15,y:0},b=.2*window.innerHeight/1.5,P={turn:!0,deck:y,hand:[],board:[],opponentBoard:g,cardGrid:6,cardWidth:b,cardRatio:1.5,focusedCard:null,pickedCard:null,pickedCardPosition:null,pickedCardRotation:w,pickedRatio:1.2,pickedCardWidth:1.2*b,fakeCardIndex:null,cardShadowColor:"white",deckPosition:{x:0,y:0},pickedPawn:null,focusedPawn:null,animation:null,handSize:".3em",focusSize:"1em",pickSize:".4em"};function _(e,t,n){var a=.2*n/e.cardRatio;return v(e,{cardWidth:a,pickedCardWidth:a*e.pickedRatio})}function E(e){var t=e.turn?{}:O(e.deck,e.hand);return v(e,Object(h.a)({turn:!e.turn,pickedCard:null,pickedCardPosition:null,pickedCardRotation:w,fakeCardIndex:null,pickedPawn:null,focusedPawn:null,board:e.board.map((function(e){return v(e,{sleeping:!1})}))},t))}function O(e,t){if(9===t.length||0===e.length)return{};var n=Math.floor(Math.random()*e.length),a=e[n];return{deck:[].concat(Object(k.a)(e.slice(0,n)),Object(k.a)(e.slice(n+1))),hand:t.concat(a)}}function x(e){return v(e,Object(h.a)({},O(e.deck,e.hand)))}function S(e){return v(e,{pickedCard:e.focusedCard,focusedCard:null})}function R(e,t){var n=t.x-e.pickedCardWidth/2,a=t.y-e.pickedCardWidth*e.cardRatio/2,r=e.pickedCardPosition?n-e.pickedCardPosition.x:0,o=e.pickedCardPosition?a-e.pickedCardPosition.y:0;return v(e,{pickedCardPosition:{x:n,y:a},pickedCardRotation:{x:w.x+C(1.5*-o,-30,30),y:w.y+C(1.5*r,-30,30)}})}function j(e){return v(e,{pickedCard:null,pickedCardPosition:null,pickedCardRotation:w,fakeCardIndex:null})}function A(e){if(5===e.board.length)return j(e);var t=v(e.pickedCard,{sleeping:!0,realHealth:e.pickedCard.health});return v(e,{board:[].concat(Object(k.a)(e.board.slice(0,e.fakeCardIndex)),[t],Object(k.a)(e.board.slice(e.fakeCardIndex))),hand:e.hand.filter((function(t){return t.key!==e.pickedCard.key})),pickedCard:null,pickedCardPosition:null,pickedCardRotation:w,fakeCardIndex:null})}function M(e,t,n){var a=e.board.find((function(e){return e.key===t}));return!(e.opponentBoard.find((function(e){return e.key===n})).realHealth<=0)&&!a.sleeping}function z(e,t){if(null===t)return v(e,{pickedPawn:null});var n=e.board.find((function(e){return e.key===t}));return v(e,{pickedPawn:n})}function T(e,t){if(null===t)return v(e,{focusedPawn:null,pickedPawn:v(e.pickedPawn,{dies:!1})});var n=e.opponentBoard.find((function(e){return e.key===t}));return M(e,e.pickedPawn.key,n.key)?v(e,{focusedPawn:v(n,{dies:n.realHealth-e.pickedPawn.attack<=0}),pickedPawn:v(e.pickedPawn,{dies:e.pickedPawn.realHealth-n.attack<=0})}):e}function B(e,t){return v(e,{board:e.board.filter((function(e){return e.key!==t})),opponentBoard:e.opponentBoard.filter((function(e){return e.key!==t}))})}function N(e){return v(e,{pickedPawn:null,focusedPawn:null})}function D(e,t,n){var a=e.board.find((function(e){return e.key===t})),r=e.opponentBoard.find((function(e){return e.key===n})),o=v(a,{sleeping:!0,realHealth:a.realHealth-r.attack}),i=v(r,{realHealth:r.realHealth-a.attack});return v(e,{pickedPawn:null,focusedPawn:null,animation:e.pickedPawn.key+"-"+e.focusedPawn.key,board:e.board.map((function(e){return e.key===a.key?o:e})),opponentBoard:e.opponentBoard.map((function(e){return e.key===r.key?i:e}))})}function I(e,t,n){var a=e.board.find((function(e){return e.key===t})),r=e.opponentBoard.find((function(e){return e.key===n})),o=v(a,{health:a.health-r.attack}),i=v(r,{health:r.health-a.attack});return v(e,{board:e.board.map((function(e){return e.key===a.key?o:e})),opponentBoard:e.opponentBoard.map((function(e){return e.key===r.key?i:e}))})}function W(e){return v(e,{board:e.board.map((function(e){return e.health>0?e:v(e,{dead:!0})})),opponentBoard:e.opponentBoard.map((function(e){return e.health>0?e:v(e,{dead:!0})}))})}var F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"END_TURN":return E(e);case"DRAW_CARD":return x(e);case"FOCUS_CARD":return v(e,{focusedCard:t.card});case"PICK_CARD":return S(e);case"UNPICK_CARD":return j(e);case"MOVE_CARD":return R(e,t);case"RESET_ROTATION":return v(e,{pickedCardRotation:w});case"MOVE_FAKE_CARD":return v(e,{fakeCardIndex:t.index});case"PUT_CARD":return A(e);case"SET_DECK_POSITION":return v(e,{deckPosition:t.position});case"PICK_PAWN":return z(e,t.pawnKey);case"FOCUS_PAWN":return T(e,t.pawnKey);case"REMOVE_PAWN":return B(e,t.pawnKey);case"ATTACK_START":return D(e,t.pawnKey,t.opponentKey);case"ATTACK_CANCEL":return N(e);case"ATTACK":return I(e,t.pawnKey,t.opponentKey);case"ATTACKS_END":return W(e);case"WINDOW_RESIZE":return _(e,t.width,t.height);default:return e}},K=function(){return{type:"END_TURN"}},U=function(){return{type:"DRAW_CARD"}},H=function(e){return{type:"FOCUS_CARD",card:e}},L=function(){return{type:"PICK_CARD"}},Y=function(){return{type:"UNPICK_CARD"}},X=function(e,t){return{type:"MOVE_CARD",x:e,y:t}},G=function(){return{type:"RESET_ROTATION"}},V=function(e){return{type:"MOVE_FAKE_CARD",index:e}},Z=function(){return{type:"PUT_CARD"}},J=function(e){return{type:"SET_DECK_POSITION",position:e}},Q=function(e){return{type:"PICK_PAWN",pawnKey:e}},q=function(e){return{type:"FOCUS_PAWN",pawnKey:e}},$=function(e){return{type:"REMOVE_PAWN",pawnKey:e}};function ee(e,t){return function(n,a){var r=a().cards;if(!M(r,r.pickedPawn.key,r.focusedPawn.key))return n({type:"ATTACK_CANCEL"});var o=[r.pickedPawn,r.focusedPawn],i=o[0],c=o[1];n({type:"ATTACK_START",pawnKey:i.key,opponentKey:c.key}),e.style.transform="none";var d=e.getBoundingClientRect(),s=t.getBoundingClientRect(),u=Math.atan2(s.left-d.left,d.top-s.top),p=Math.hypot(s.top+s.height/2-d.top,s.left-d.left);e.animate([{transform:"none",zIndex:10},{offset:.5,transform:"rotate(".concat(u,"rad) translateY(").concat(.2*p,"px)")},{offset:Math.min(.75,.5+p/8e3),transform:"rotate(".concat(u,"rad) translateY(").concat(-p,"px)")},{offset:Math.min(1,.5+6*p/8e3),transform:"rotate(".concat(u,"rad) translateY(0px)"),zIndex:10}],800).onfinish=function(){n({type:"ATTACK",pawnKey:i.key,opponentKey:c.key}),a().cards.animation===i.key+"-"+c.key&&n({type:"ATTACKS_END"})}}}var te=function(e,t){return{type:"WINDOW_RESIZE",width:e,height:t}},ne=Object(h.a)({},a),ae=n(6),re=function(e,t){return e+t},oe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:re,a=[],r=null;Array.isArray(t)||(t=[t]),t=Array.from(t,(function(e){return e&&"function"!==typeof e?n:e}));var o=function(){for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];t.forEach((function(e,t){e&&void 0!==a[t]&&(o[t]=e(a[t],o[t]))})),a=o,r||(r=requestAnimationFrame((function(){r=null;var t=Object(k.a)(a);a=[],e.apply(void 0,Object(k.a)(t))})))};return o.cancel=function(){r&&(cancelAnimationFrame(r),r=null)},o},ie=n(13),ce=n.n(ie),de=n(10),se=n.n(de),ue=n(20),pe=n.n(ue),le=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).mouseDown=function(){var t;e.props.opponent||(null===(t=e.props.info)||void 0===t?void 0:t.sleeping)||!e.props.turn||e.props.pickPawn(e.props.info.key)},e.mouseUp=function(t){e.props.opponent&&e.props.pickedPawn&&e.props.turn&&e.props.attack(e.ref.current)},e.mouseEnter=function(t){e.props.opponent&&e.props.pickedPawn&&e.props.focusPawn(e.props.info.key)},e.mouseLeave=function(t){e.props.opponent&&e.props.pickedPawn&&e.props.focusPawn(null)},e.ref=o.a.createRef(),e}return Object(s.a)(n,[{key:"componentDidUpdate",value:function(){var e,t=this;(null===(e=this.props.info)||void 0===e?void 0:e.dead)&&(this.ref.current.animate([{opacity:1},{opacity:0}],{duration:800,fill:"forwards"}).onfinish=function(){return t.props.removePawn(t.props.info.key)})}},{key:"render",value:function(){var e,t,n,a,r,i,c=(null===(e=this.props.focusedPawn)||void 0===e?void 0:e.key)===(null===(t=this.props.info)||void 0===t?void 0:t.key)&&(null===(n=this.props.focusedPawn)||void 0===n?void 0:n.dies)||this.props.picked&&(null===(a=this.props.pickedPawn)||void 0===a?void 0:a.dies);return o.a.createElement("div",{role:"button",tabIndex:0,ref:this.ref,className:se.a.Egg,style:Object(h.a)(Object(h.a)({},this.props.style),{},{background:null===(r=this.props.info)||void 0===r?void 0:r.background,transform:this.props.picked&&"scale(1.2, 1.2)",boxShadow:!this.props.turn||this.props.noContent||this.props.opponent||((null===(i=this.props.info)||void 0===i?void 0:i.sleeping)?this.props.picked&&"0 4px 2px 0 rgba(0,0,0,0.5)":"0 0 8px 4px green")}),onMouseDown:this.mouseDown,onMouseUp:this.mouseUp,onMouseEnter:this.mouseEnter,onMouseLeave:this.mouseLeave},this.props.noContent||o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:se.a.Float+" "+se.a.Attack},this.props.info.attack),o.a.createElement("div",{className:se.a.Float+" "+se.a.Health},this.props.info.health),c&&o.a.createElement("img",{alt:"dies",src:pe.a})))}}]),n}(o.a.Component),fe=Object(ae.b)((function(e){return{focusedPawn:e.cards.focusedPawn,pickedPawn:e.cards.pickedPawn,turn:e.cards.turn}}),(function(e){return{pickPawn:function(t){return e(ne.pickPawn(t))},focusPawn:function(t){return e(ne.focusPawn(t))},removePawn:function(t){return e(ne.removePawn(t))}}}))(le),he=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={columns:[]},e.ref=o.a.createRef(),e.opRef=o.a.createRef(),e.setColumns=oe((function(){var t=Array.from(e.ref.current.children).map((function(e){var t=e.getBoundingClientRect();return t.left+t.width/2}));e.setState({columns:t})})),e.mouseUp=function(t){e.props.pickedCard&&(t.stopPropagation(),e.orderFakeCard.cancel(),e.props.putCard())},e.orderFakeCard=oe((function(t){var n=e.state.columns.findIndex((function(e){return t.pageX<e}));-1===n&&(n=e.state.columns.length),e.props.moveFakeCard(n)})),e.mouseMove=function(t){e.state.columns.length&&e.props.pickedCard&&5!==e.props.board.length&&(t.persist(),e.orderFakeCard(t))},e.mouseLeave=function(){e.state.columns.length&&e.props.pickedCard&&5!==e.props.board.length&&(e.orderFakeCard.cancel(),e.props.moveFakeCard(null))},e.attack=function(t){var n=e.ref.current.children[e.props.board.findIndex((function(t){return t.key===e.props.pickedPawn.key}))];e.props.attack(n,t)},e}return Object(s.a)(n,[{key:"componentDidUpdate",value:function(){this.props.board.length!==this.state.columns.length&&this.setColumns()}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.setColumns)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.setColumns)}},{key:"render",value:function(){var e=this,t=this.props.fakeCard&&o.a.createElement(fe,{noContent:!0,style:{order:this.props.fakeCardOrder,fontSize:this.props.cardSize}});return o.a.createElement("div",{className:ce.a.Board,onMouseMove:this.mouseMove,onMouseUp:this.mouseUp,onMouseLeave:this.mouseLeave},o.a.createElement("div",{ref:this.opRef,className:ce.a.Line,style:{borderBottom:"3px dotted gray"}},this.props.opponentBoard.map((function(t){return o.a.createElement(fe,{opponent:!0,attack:e.attack,key:t.key,info:t,style:{fontSize:e.props.cardSize}})}))),o.a.createElement("div",{ref:this.ref,className:ce.a.Line},this.props.board.map((function(t,n){var a;return o.a.createElement(fe,{key:t.key,info:t,picked:(null===(a=e.props.pickedPawn)||void 0===a?void 0:a.key)===t.key,style:{order:2*n,fontSize:e.props.cardSize}})})),t))}}]),n}(o.a.Component),ke=Object(ae.b)((function(e){return{board:e.cards.board,opponentBoard:e.cards.opponentBoard,pickedCard:e.cards.pickedCard,pickedCardWidth:e.cards.pickedCardWidth,pickedCardHeight:e.cards.pickedCardWidth*e.cards.cardRatio,fakeCard:null!==e.cards.fakeCardIndex,fakeCardOrder:2*e.cards.fakeCardIndex-1,cardSize:e.cards.pickSize,pickedPawn:e.cards.pickedPawn,focusedPawn:e.cards.focusedPawn}}),(function(e){return{moveFakeCard:function(t){return e(ne.moveFakeCard(t))},putCard:function(){return e(ne.putCard())},attack:function(t,n){return e(ne.attack(t,n))}}}))(he),me=n(7),Ce=n.n(me),ve=n(21),ye=n.n(ve),ge=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e;return o.a.createElement("div",{className:Ce.a.Container,style:this.props.containerStyle},o.a.createElement("div",Object.assign({className:"".concat(Ce.a.Card," ").concat(this.props.noContent?Ce.a.Empty:""),style:this.props.style},this.props.passProps),this.props.noContent||o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:Ce.a.Egg,style:{background:this.props.info.background}}),o.a.createElement("div",{className:Ce.a.Text},null===(e=this.props.info)||void 0===e?void 0:e.title),o.a.createElement("div",{className:Ce.a.Float+" "+Ce.a.Attack},this.props.info.attack),o.a.createElement("div",{className:Ce.a.Float+" "+Ce.a.Health},this.props.info.health),o.a.createElement("div",{className:Ce.a.Float+" "+Ce.a.Mana},this.props.info.mana)),this.props.hasBackface&&o.a.createElement("div",{className:Ce.a.Backface,style:{background:"url(".concat(ye.a,")"),backgroundSize:"cover",backgroundRepeat:"repeat"}})))}}]),n}(o.a.Component),we=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={center:0},e.focus=function(){e.props.pickedCard||e.props.focusCard(e.props.info)},e.unfocus=function(){e.props.focusCard(null)},e.mouseDown=function(t){e.props.turn&&(e.props.pickCard(),e.props.moveCard(t.pageX,t.pageY))},e}return Object(s.a)(n,[{key:"render",value:function(){var e={role:"button",tabIndex:0,onMouseDown:this.mouseDown,onMouseEnter:this.focus,onMouseLeave:this.unfocus,ref:this.props.setRef};return o.a.createElement(o.a.Fragment,null,o.a.createElement(ge,{info:this.props.info,passProps:e,hasBackface:this.props.hasBackface,containerStyle:Object(h.a)(Object(h.a)({},this.props.containerStyle),{},{display:this.props.picked?"none":""}),style:Object(h.a)(Object(h.a)({},this.props.style),{},{opacity:this.props.focused?0:1})}),this.props.focused&&o.a.createElement(o.a.Fragment,null,o.a.createElement(ge,{noContent:!0,containerStyle:Object(h.a)(Object(h.a)({},this.props.containerStyle),{},{pointerEvents:"none"}),style:this.props.style}),o.a.createElement(ge,{info:this.props.info,containerStyle:Object(h.a)(Object(h.a)({},this.props.containerStyle),{},{fontSize:this.props.focusedSize,position:"absolute",transform:"none",transformOrigin:"center",left:"-50%",bottom:"90%",pointerEvents:"none",zIndex:4})})))}}]),n}(o.a.Component),be=Object(ae.b)((function(e){return{pickedCard:e.cards.pickedCard,focusedSize:e.cards.focusSize,turn:e.cards.turn}}),(function(e){return{focusCard:function(t){return e(ne.focusCard(t))},pickCard:function(){return e(ne.pickCard())},moveCard:function(t,n){return e(ne.moveCard(t,n))}}}))(we),Pe=n(22),_e=n.n(Pe),Ee=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={lastCard:null,lastSize:0},e.setRef=function(t){e.setState({lastCard:t})},e.calculateColumn=function(t){var n=e.props.cardOverflow*t+1;return"".concat(n," / ").concat(n+e.props.cardGrid)},e.calculateRotate=function(t){t++;var n=(e.props.cardCount+1)/2;if(t===n||e.props.cardGrid<=e.props.cardOverflow)return"rotate(0)";var a=2*Math.sign(t-n)+3*Math.trunc(t-n),r=.05*Math.pow(Math.abs(t-n),3);return"rotate(".concat(a,"deg) translateY(").concat(r,"%)")},e.calculateOrigin=function(t){t++;var n=(e.props.cardCount+1)/2;return t===n?"center":t-n>0?"bottom left":"bottom right"},e}return Object(s.a)(n,[{key:"componentDidUpdate",value:function(){if(this.props.cards.length<this.state.lastSize)return this.setState({lastCard:null,lastSize:this.props.cards.length});if(this.state.lastCard&&this.props.cards.length!==this.state.lastSize){var e=this.state.lastCard,t=e.getBoundingClientRect();e.parentNode.animate([{position:"absolute",left:this.props.deckPosition.x-t.left+"px",bottom:-(this.props.deckPosition.y-t.top)+"px",transform:"none",fontSize:this.props.size},{offset:.25,left:"-50%",bottom:"105%",transform:"none",fontSize:"calc(2.5 * ".concat(this.props.size,")")},{offset:.9,left:"-50%",bottom:"105%",transform:"none",fontSize:"calc(2.5 * ".concat(this.props.size,")")},{position:"absolute",left:"0px",bottom:"0px"}],2500),e.animate([{transform:"rotateX(0deg)  rotateY(180deg)"},{transform:"rotateX(45deg)  rotateY(225deg)"},{transform:"rotateX(90deg) rotateY(270deg)"},{offset:.25,transform:"rotateX(0deg)  rotateY(360deg)"},{offset:.9,transform:"rotateX(0deg)  rotateY(360deg)"},{transform:"rotateX(0deg)  rotateY(360deg)"}],2500),this.setState({lastCard:null,lastSize:this.props.cards.length})}}},{key:"render",value:function(){var e=this,t=this.props.cards.map((function(t,n){var a,r=e.props.pickedIndex===n,i=(null===(a=e.props.focusedCard)||void 0===a?void 0:a.key)===t.key,c=n===e.props.cards.length-1;return e.props.pickedIndex>=0&&n>e.props.pickedIndex&&n--,o.a.createElement(be,Object.assign({},c?{setRef:e.setRef,hasBackface:!0}:{},{key:t.key,info:t,focused:i,picked:r,containerStyle:{fontSize:e.props.size,gridColumn:e.calculateColumn(n),transform:e.calculateRotate(n),transformOrigin:e.calculateOrigin(n),zIndex:3,perspective:"500px",marginBottom:"-30%"},style:{border:"2px solid black"}}))}));return o.a.createElement("div",{className:_e.a.Hand,style:{gridTemplateColumns:"repeat(".concat(this.props.columnCount,", 1fr)")}},o.a.createElement(ge,{noContent:!0,containerStyle:{fontSize:this.props.size,gridColumn:this.calculateColumn(0),opacity:0,marginBottom:"-30%"}}),t)}}]),n}(o.a.Component),Oe=Object(ae.b)((function(e){var t=e.cards.hand.findIndex((function(t){var n;return t.key===(null===(n=e.cards.pickedCard)||void 0===n?void 0:n.key)})),n=e.cards.hand.length-(-1!==t),a=function(e){switch(e){case 1:case 2:return 7;case 3:case 4:return 4;case 5:case 6:return 3;default:return 2}}(n);return{cards:e.cards.hand,pickedIndex:t,cardCount:n,cardGrid:e.cards.cardGrid,cardOverflow:a,focusedCard:e.cards.focusedCard,cardWidth:e.cards.cardWidth,cardHeight:e.cards.cardWidth*e.cards.cardRatio,columnCount:e.cards.cardGrid+(n-1)*a,deckPosition:e.cards.deckPosition,size:e.cards.handSize}}))(Ee),xe=n(11),Se=n.n(xe),Re=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).setRef=function(t){e.card=t},e.setPosition=function(){var t=e.card.getBoundingClientRect();e.props.setDeckPosition({x:t.left,y:t.top})},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.setPosition(),this._setPosition=oe(this.setPosition),window.addEventListener("resize",this._setPosition)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._setPosition)}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(ge,{hasBackface:!0,noContent:!0,passProps:{ref:this.setRef},containerStyle:{marginBottom:"0.7rem",boxShadow:this.props.boxShadow,fontSize:this.props.size,paddingTop:0},style:{border:"none",transform:"rotateY(180deg)"}}))}}]),n}(o.a.Component),je=function(e,t){var n=t<10?t:Math.floor(Math.max(10,t/2));return Array(n).fill().map((function(t,n){var a=n%2===0?e:"0 0.65px";return n=Math.floor(n/2)+1,"-".concat(n,"px ").concat(n,"px ").concat(a)})).join()},Ae=Object(ae.b)((function(e){return{cardWidth:e.cards.cardWidth,cardHeight:e.cards.cardWidth*e.cards.cardRatio,empty:0===e.cards.deck.length,boxShadow:je(e.cards.cardShadowColor,e.cards.deck.length),size:e.cards.handSize}}),(function(e){return{drawCard:function(){return e(ne.drawCard())},unpickCard:function(){return e(ne.unpickCard())},setDeckPosition:function(t){return e(ne.setDeckPosition(t))}}}))(Re),Me=n(23),ze=n.n(Me),Te=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:Se.a.BottomPane},o.a.createElement("div",{className:Se.a.Container}," MANA STUFF "),o.a.createElement("div",{className:Se.a.Container,style:{zIndex:2,display:"flex",flexFlow:"column nowrap",alignItems:"center",gap:"0.5em"}},o.a.createElement("img",{alt:"CHAR",src:ze.a,style:{border:"3px solid brown",borderRadius:"50% 50% 0 0",padding:"0.2em",width:"100px",height:"120px"}}),o.a.createElement(Oe,null)),o.a.createElement("div",{className:Se.a.Container},o.a.createElement(Ae,null))))}}]),n}(o.a.Component),Be=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).mouseMove=function(t){e.props.pickedCard&&(t.persist(),e.props.moveCard(t.pageX,t.pageY),e.props.resetRotation())},e.mouseUp=function(){e.props.pickedCard?e.props.unpickCard():e.props.pickedPawn&&e.props.unpickPawn()},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=this;if(this.props.turn)for(var t=0;t<3;t++)setTimeout((function(){e.props.drawCard()}),500*(t+1))}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{onMouseMove:this.mouseMove,onMouseUp:this.mouseUp,className:f.a.Scene},o.a.createElement("div",null,o.a.createElement("button",{onClick:this.props.endTurn},this.props.turn?"End Turn":"Not Your Turn")),o.a.createElement(ke,null),o.a.createElement(Te,null)),this.props.pickedCard&&o.a.createElement(ge,{info:this.props.pickedCard,containerStyle:{fontSize:this.props.pickedSize,position:"fixed",left:this.props.pickedCardPosition.x,top:this.props.pickedCardPosition.y,pointerEvents:"none",zIndex:10,perspective:"500px"},style:{transform:this.props.pickedCardRotation}}))}}]),n}(o.a.Component),Ne=Object(ae.b)((function(e){return{pickedCard:e.cards.pickedCard,pickedCardWidth:e.cards.pickedCardWidth,pickedCardHeight:e.cards.pickedCardWidth*e.cards.cardRatio,pickedCardPosition:e.cards.pickedCardPosition,pickedCardRotation:"rotateX(".concat(e.cards.pickedCardRotation.x,"deg) rotateY(").concat(e.cards.pickedCardRotation.y,"deg)"),pickedSize:e.cards.pickSize,pickedPawn:e.cards.pickedPawn,turn:e.cards.turn}}),(function(e){return{endTurn:function(){return e(ne.endTurn())},drawCard:function(){return e(ne.drawCard())},unpickCard:function(){return e(ne.unpickCard())},moveCard:oe((function(t,n){return e(ne.moveCard(t,n))})),resetRotation:m((function(){e(ne.resetRotation())}),120),unpickPawn:function(){return e(ne.pickPawn(null))}}}))(Be),De=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return o.a.createElement(Ne,null)}}]),n}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ie=n(8),We=Object(Ie.c)({cards:F}),Fe=n(24),Ke=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Ie.d,Ue=Object(Ie.e)(We,Ke(Object(Ie.a)(Fe.a)));window.addEventListener("resize",oe((function(){Ue.dispatch(ne.resizeWindow(window.innerWidth,window.innerHeight))}))),c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(ae.a,{store:Ue},o.a.createElement(De,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[25,1,2]]]);
//# sourceMappingURL=main.eddd9d40.chunk.js.map