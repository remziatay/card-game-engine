(this["webpackJsonpcard-game-engine"]=this["webpackJsonpcard-game-engine"]||[]).push([[0],{15:function(e,t,r){e.exports={Card:"Card_Card__1a3PF"}},16:function(e,t,r){e.exports={Hand:"Hand_Hand__2DWBX"}},17:function(e,t,r){e.exports={Scene:"Scene_Scene__MfpmQ"}},18:function(e,t,r){e.exports={Board:"Board_Board__tkmV4"}},19:function(e,t,r){e.exports=r(32)},24:function(e,t,r){},25:function(e,t,r){},32:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),c=r(9),o=r.n(c),i=(r(24),r(1)),d=r(2),s=r(4),u=r(3),p=(r(25),r(5)),l=r(8),f=function(e,t){return{type:"MOVE_CARD",x:e,y:t}},h=r(15),C=r.n(h),m=function(e){Object(s.a)(r,e);var t=Object(u.a)(r);function r(){return Object(i.a)(this,r),t.apply(this,arguments)}return Object(d.a)(r,[{key:"render",value:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",Object.assign({className:C.a.Card,style:this.props.style},this.props.passProps),this.props.info.title))}}]),r}(a.a.Component),k=function(e){Object(s.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={center:0},e.focus=function(t){e.props.pickedCard||(e.props.focusCard(e.props.info),e.setState({center:t.pageX}))},e.unfocus=function(){e.props.focusCard(null)},e.mouseDown=function(t){e.props.pickCard(),e.props.moveCard(t.pageX,t.pageY)},e}return Object(d.a)(r,[{key:"render",value:function(){var e={role:"button",tabIndex:0,onMouseDown:this.mouseDown,onMouseEnter:this.focus,onMouseLeave:this.unfocus};return a.a.createElement(a.a.Fragment,null,a.a.createElement(m,{info:this.props.info,passProps:e,style:Object(l.a)(Object(l.a)({},this.props.style),{},{opacity:this.props.focused||this.props.picked?0:1,display:this.props.picked?"none":""})}),this.props.focused&&a.a.createElement(m,{info:this.props.info,style:{position:"absolute",left:this.state.center-this.props.focusedCardWidth/2,bottom:"5%",width:this.props.focusedCardWidth+"px",height:this.props.focusedCardHeight+"px",zIndex:2,pointerEvents:"none"}}))}}]),r}(a.a.Component),v=Object(p.b)((function(e){return{pickedCard:e.cards.pickedCard}}),(function(e){return{focusCard:function(t){return e(function(e){return{type:"FOCUS_CARD",card:e}}(t))},pickCard:function(){return e({type:"PICK_CARD"})},moveCard:function(t,r){return e(f(t,r))}}}))(k),b=r(16),y=r.n(b),O=function(e){Object(s.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).calculateColumn=function(t){var r=e.props.cardOverflow*t+1;return"".concat(r," / ").concat(r+e.props.cardGrid)},e.calculateRotate=function(t){t++;var r=(e.props.cardCount+1)/2;if(t===r||e.props.cardGrid<=e.props.cardOverflow)return"rotate(0)";var n=2*Math.sign(t-r)+3*Math.trunc(t-r),a=.05*Math.pow(Math.abs(t-r),3);return"rotate(".concat(n,"deg) translateY(").concat(a,"%)")},e.calculateOrigin=function(t){t++;var r=(e.props.cardCount+1)/2;return t===r?"center":t-r>0?"bottom left":"bottom right"},e}return Object(d.a)(r,[{key:"render",value:function(){var e=this,t=this.props.cards.map((function(t,r){var n,c=e.props.pickedIndex===r,o=(null===(n=e.props.focusedCard)||void 0===n?void 0:n.key)===t.key;return e.props.pickedIndex>=0&&r>e.props.pickedIndex&&r--,a.a.createElement(v,{key:t.key,info:t,focused:o,picked:c,focusedCardWidth:2.5*e.props.cardWidth,focusedCardHeight:2.5*e.props.cardHeight,style:{gridColumn:e.calculateColumn(r),transform:e.calculateRotate(r),transformOrigin:e.calculateOrigin(r),height:e.props.cardHeight}})}));return a.a.createElement("div",{className:y.a.Hand,style:{width:"".concat(this.props.cardWidth*this.props.widthRate,"px")}},t)}}]),r}(a.a.Component),g=Object(p.b)((function(e){var t=e.cards.hand.findIndex((function(t){var r;return t.key===(null===(r=e.cards.pickedCard)||void 0===r?void 0:r.key)})),r=e.cards.hand.length-(-1!==t),n=function(e){switch(e){case 1:case 2:return 7;case 3:case 4:return 4;case 5:case 6:return 3;default:return 2}}(r);return{cards:e.cards.hand,pickedIndex:t,cardCount:r,cardGrid:e.cards.cardGrid,cardOverflow:n,focusedCard:e.cards.focusedCard,cardWidth:e.cards.cardWidth,cardHeight:e.cards.cardWidth*e.cards.cardRatio,widthRate:1+(r-1)*n/e.cards.cardGrid}}))(O),j=r(17),E=r.n(j),_=r(18),w=r.n(_),A=function(e){Object(s.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).mouseUp=function(t){t.stopPropagation(),e.props.pickedCard&&e.props.putCard()},e}return Object(d.a)(r,[{key:"render",value:function(){return console.log(this.props.board),a.a.createElement("div",{onMouseUp:this.mouseUp,className:w.a.Board},this.props.board.map((function(e){return a.a.createElement(m,{key:e.key,info:e,style:{width:"120px",height:"180px"}})})))}}]),r}(a.a.Component),x=Object(p.b)((function(e){return{board:e.cards.board,pickedCard:e.cards.pickedCard}}),(function(e){return{putCard:function(){return e({type:"PUT_CARD"})}}}))(A),R=r(7),D=function(e,t){return e+t},W=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:D,n=[],a=null;Array.isArray(t)||(t=[t]),t=Array.from(t,(function(e){return e&&"function"!==typeof e?r:e}));var c=function(){for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];t.forEach((function(e,t){e&&void 0!==n[t]&&(c[t]=e(n[t],c[t]))})),n=c,a||(a=requestAnimationFrame((function(){a=null;var t=Object(R.a)(n);n=[],e.apply(void 0,Object(R.a)(t))})))};return c.cancel=function(){a&&(cancelAnimationFrame(a),a=null)},c},M=function(e){Object(s.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).mouseMove=function(t){e.props.pickedCard&&(t.persist(),e.props.moveCard(t.pageX,t.pageY))},e.mouseUp=function(){e.props.pickedCard&&e.props.unpickCard()},e}return Object(d.a)(r,[{key:"render",value:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{onMouseMove:this.mouseMove,onMouseUp:this.mouseUp,className:E.a.Scene},a.a.createElement("div",null,a.a.createElement("button",{onClick:this.props.drawCard},"Draw Card")),a.a.createElement(x,null),a.a.createElement("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"center",minWidth:"100%"}},a.a.createElement(g,null))),this.props.pickedCard&&a.a.createElement(m,{info:this.props.pickedCard,style:{position:"fixed",width:this.props.pickedCardWidth,height:this.props.pickedCardHeight,left:this.props.pickedCardPosition.x,top:this.props.pickedCardPosition.y,pointerEvents:"none"}}))}}]),r}(a.a.Component),P=Object(p.b)((function(e){return{pickedCard:e.cards.pickedCard,pickedCardWidth:e.cards.pickedCardWidth,pickedCardHeight:e.cards.pickedCardWidth*e.cards.cardRatio,pickedCardPosition:e.cards.pickedCardPosition}}),(function(e){return{drawCard:function(){return e({type:"DRAW_CARD"})},unpickCard:function(){return e({type:"UNPICK_CARD"})},moveCard:W((function(t,r){return e(f(t,r))}))}}))(M),I=function(e){Object(s.a)(r,e);var t=Object(u.a)(r);function r(){return Object(i.a)(this,r),t.apply(this,arguments)}return Object(d.a)(r,[{key:"render",value:function(){return a.a.createElement(P,null)}}]),r}(a.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var U=r(6);function S(e,t){return Object(l.a)(Object(l.a)({},e),t)}var H={deck:Array(30).fill().map((function(e,t){return{key:t,title:"".concat(t,". card")}})),hand:[],board:[],cardGrid:6,cardWidth:100,cardRatio:1.5,focusedCard:null,pickedCard:null,pickedCardPosition:null,pickedCardWidth:300};function N(e){if(9===e.hand.length)return e;var t=Math.floor(Math.random()*e.deck.length),r=e.deck[t];return S(e,{deck:[].concat(Object(R.a)(e.deck.slice(0,t)),Object(R.a)(e.deck.slice(t+1))),hand:e.hand.concat(r)})}function F(e){return S(e,{pickedCard:e.focusedCard,focusedCard:null})}function X(e,t){return S(e,{pickedCardPosition:{x:t.x-e.pickedCardWidth/2,y:t.y-e.pickedCardWidth*e.cardRatio/2}})}function B(e){return S(e,{pickedCard:null})}function G(e){return 5===e.board.length?B(e):S(e,{board:e.board.concat(e.pickedCard),hand:e.hand.filter((function(t){return t.key!==e.pickedCard.key})),pickedCard:null})}var T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DRAW_CARD":return N(e);case"FOCUS_CARD":return S(e,{focusedCard:t.card});case"PICK_CARD":return F(e);case"UNPICK_CARD":return B(e);case"MOVE_CARD":return X(e,t);case"PUT_CARD":return G(e);default:return e}},V=Object(U.b)({cards:T}),K=Object(U.c)(V,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(p.a,{store:K},a.a.createElement(I,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[19,1,2]]]);
//# sourceMappingURL=main.6e06c88d.chunk.js.map